{% extends 'base.html' %}
{% load static %}

{% block title %}Denúncia de Maus-Tratos a Animais{% endblock %}

{% block content %}
<header class="bg-light py-5">
    <div class="container text-center">
        <h1>Denúncia de Maus-Tratos a Animais</h1>
        <p>Preserve a vida e o bem-estar dos animais. Sua denúncia pode salvar uma vida!</p>
    </div>
</header>

<main class="container my-5">
    {% block messages %}
    {% if messages %}
    <div class="alert alert-info">
        {% for message in messages %}
            <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endblock %}

    <form action="" method="POST" enctype="multipart/form-data" class="denuncia-form">
        {% csrf_token %}

        <section>
            <h2>1. Informações do Animal</h2>
            <div class="form-group">
                {{ form.especie.label_tag }}
                {{ form.especie }}
                {% if form.especie.errors %}
                    <div class="field-error">{{ form.especie.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.nome.label_tag }}
                {{ form.nome }}
                {% if form.nome.errors %}
                    <div class="field-error">{{ form.nome.errors }}</div>
                {% endif %}
            </div>
            <!-- Continue com os outros campos -->
        </section>

        <section>
            <h2>2. Detalhes do Caso</h2>
            <div class="form-group">
                <label>Tipo de Maus-Tratos:</label>
                {{ form.tipo_maustratos }}
                {% if form.tipo_maustratos.errors %}
                    <div class="field-error">{{ form.tipo_maustratos.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.descricao_caso.label_tag }}
                {{ form.descricao_caso }}
                {% if form.descricao_caso.errors %}
                    <div class="field-error">{{ form.descricao_caso.errors }}</div>
                {% endif %}
            </div>
        </section>

        <section>
            <h2>3. Informações sobre o Responsável (se conhecido)</h2>
            <div class="form-group">
                {{ form.responsavel.label_tag }}
                {{ form.responsavel }}
                {% if form.responsavel.errors %}
                    <div class="field-error">{{ form.responsavel.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.local.label_tag }}
                {{ form.local }}
                {% if form.local.errors %}
                    <div class="field-error">{{ form.local.errors }}</div>
                {% endif %}
            </div>
        </section>

        <section>
            <h2>4. Comprovação do Caso</h2>
            <div class="form-group">
                {{ form.comprovacao.label_tag }}
                {{ form.comprovacao }}
                {% if form.comprovacao.errors %}
                    <div class="field-error">{{ form.comprovacao.errors }}</div>
                {% endif %}
            </div>
        </section>

        <section>
            <h2>5. Dados do Denunciante</h2>
            <p>(Ao clicar no botão, sua denúncia será feita de forma anônima)</p>
            <button type="button" id="toggle-anonimo" class="btn btn-secondary mb-3">Denúncia Anônima</button>

            <div id="denunciante-info" class="hidden">
                <div class="form-group">
                    {{ form.nome_denunciante.label_tag }}
                    {{ form.nome_denunciante }}
                    <small>{{ form.nome_denunciante.help_text }}</small>
                    {% if form.nome_denunciante.errors %}
                        <div class="field-error">{{ form.nome_denunciante.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.email.label_tag }}
                    {{ form.email }}
                    {% if form.email.errors %}
                        <div class="field-error">{{ form.email.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.telefone.label_tag }}
                    {{ form.telefone }}
                    {% if form.telefone.errors %}
                        <div class="field-error">{{ form.telefone.errors }}</div>
                    {% endif %}
                </div>
            </div>
        </section>

        <button type="submit" class="btn btn-success">Enviar Denúncia</button>
    </form>
</main>

{% endblock %}



<script>
    document.addEventListener("DOMContentLoaded", function() {
        var botaoAnonimo = document.getElementById("toggle-anonimo");
        var infoDenunciante = document.getElementById("denunciante-info");

        botaoAnonimo.addEventListener("click", function() {
            infoDenunciante.classList.toggle("d-none");
            botaoAnonimo.textContent = infoDenunciante.classList.contains("d-none") ? "Mostrar Dados do Denunciante" : "Denúncia Anônima";
        });
    });
